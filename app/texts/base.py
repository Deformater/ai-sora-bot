from datetime import datetime
from aiogram.utils.deep_linking import create_start_link

from app.db.models import Link


def format_datetime(dt: datetime) -> str:
    return dt.strftime("%d.%m.%Y %H:%M")


def validate_prompt(prompt: str) -> bool:
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
    banned_words = ["–Ω–∞—Å–∏–ª–∏–µ", "–ø–æ—Ä–Ω–æ–≥—Ä–∞—Ñ–∏—è", "—ç–∫—Å—Ç—Ä–µ–º–∏–∑–º"]
    return all(word not in prompt.lower() for word in banned_words)


def menu_text(first_name: str, credits: int):
    text = f"""üëã –ü—Ä–∏–≤–µ—Ç, {first_name}!\n
üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å: {credits} –∫—Ä–µ–¥–∏—Ç–æ–≤\n\n
–Ø –±–æ—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–µ—Ä—Ö—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –≤–∏–¥–µ–æ —Å–æ –∑–≤—É–∫–æ–º –ø–æ–º–æ—â—å—é –ò–ò.\n\n
"""
    return text


def start_text():
    text = """üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!  

–≠—Ç–æ –±–æ—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ —Å–æ –∑–≤—É–∫–æ–º —Å –ø–æ–º–æ—â—å—é –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ Sora 2.

‚ú® –ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–ø—Ä–æ–º–ø—Ç) —Ç–æ–≥–æ, –∫–∞–∫–æ–µ –≤–∏–¥–µ–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å.  

üì∏ –ú–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–æ—Ç–æ (–ø–æ–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ).

üíé –û–ø–ª–∞—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –º–æ–∂–Ω–æ –∫–∞–∫ –≤ —Ä—É–±–ª—è—Ö, —Ç–∞–∫ –∏ –≤ –∑–≤—ë–∑–¥–æ—á–∫–∞—Ö!

üí∏ –£ –Ω–∞—Å —Å–∞–º—ã–µ –Ω–∏–∑–∫–∏–µ —Ü–µ–Ω—ã –Ω–∞ —Ä—ã–Ω–∫–µ!

–ù–∞–∂–∏–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å
üëá–ù–∞–∂–º–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å"""
    return text


def video_text():
    text = f"""–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª:

‚Äî Veo3 (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–≤–µ—Ä—Ö—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –≤–∏–¥–µ–æ —Å –æ–∑–≤—É—á–∫–æ–π)

- Kling (–ü–µ—Ä–µ–¥–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –≤–∏–¥–µ–æ —Å —Ç–æ—á–Ω–æ–π —Ñ–∏–∑–∏–∫–æ–π –¥–≤–∏–∂–µ–Ω–∏–π)

‚Äî Midjourney Video (–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É/—Ñ–æ—Ç–æ.. –°–∏–ª—ë–Ω –≤ —Å—Ç–∏–ª—è—Ö, –∞—Ä—Ç–∞—Ö, –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ö)

‚Äî Runway (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ –ø–æ —Ç–µ–∫—Å—Ç—É –∏–ª–∏ —Ñ–æ—Ç–æ)

–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ:
"""
    return text


def photo_text():
    text = f"""–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª:

‚Äî GPT-4o Image (–ì–∏–ø–µ—Ä—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É –∏–ª–∏ —Ñ–æ—Ç–æ. –õ—É—á—à–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

‚Äî NanoBanana (–ù–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —à–µ–¥–µ–≤—Ä–æ–≤. –ò–ò —É–±–∏–π—Ü–≤ —Ñ–æ—Ç–æ—à–æ–ø–∞)

‚Äî Midjourney (–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É/—Ñ–æ—Ç–æ. –°–∏–ª—ë–Ω –≤ —Å—Ç–∏–ª—è—Ö, –∞—Ä—Ç–∞—Ö, –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ö)

‚Äî Flux (–ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–∂–µ—Ç —É—Å—Ç—É–ø–∞—Ç—å)

–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ:
"""
    return text


def ai_type_text():
    text = """–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª:

üñº –†–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ç–æ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞—à–∏—Ö —Ñ–æ—Ç–æ)

üé• –í–∏–¥–µ–æ –±—É–¥—É—â–µ–≥–æ (—Å–≤–µ—Ä—Ö-—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –≤–∏–¥–µ–æ –ø–æ —Ç–µ–∫—Å—Ç—É –∏–ª–∏ —Ñ–æ—Ç–æ)

–í—ã–±–µ—Ä–∏—Ç–µ —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å:
"""
    return text


def success_video_text(prompt):
    text = f"""üé• –í–∞—à–µ –≤–∏–¥–µ–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É: {prompt[:50]}..."""
    return text


def buy_credits_text():
    text = """üåè –ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã –ú–ò–†, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–ø–ª–∞—Ç—É –∑–≤—ë–∑–¥–æ—á–∫–∞–º–∏

–ö—É–ø–∏—Ç—å –∑–≤—ë–∑–¥–æ—á–∫–∏ –¥—ë—à–µ–≤–æ –º–æ–∂–Ω–æ [—Ç—É—Ç](https://t.me/LabubuStarsbot?start=BtY1L_XSI6spKifZ)

–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:"""
    return text


def prompt_text(model: str):
    model = model.capitalize()
    text = f"–í—ã –≤—ã–±—Ä–∞–ª–∏ –º–æ–¥–µ–ª—å {model}, –¥–æ—Å—Ç—É–ø–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Ñ–æ—Ç–æ\n\n"

    text += """‚úçÔ∏è –í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–∏–¥–µ–æ, –ø–∏—à–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ

–ü—Ä–∏–º–µ—Ä: '–ú–æ–ª–æ–¥–æ–π —Ä–µ–ø–æ—Ä—Ç—ë—Ä –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –±–µ–≥–µ–º–æ—Ç—É –≤ –º–æ—Å–∫–≤–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–∞–∫ –µ–º—É –∂–∏–∑–Ω—å –≤ —Ä–æ—Å—Å–∏–∏'

–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ veo3 —ç—Ç–æ –Ω–µ–π—Ä–æ—Å–µ—Ç—å, –∞ –Ω–µ —Ç–æ—á–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º, –æ–Ω–∞ –º–æ–∂–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –≤—ã–¥–∞–≤–∞—Ç—å –Ω–µ–≤–µ—Ä–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ–±—ã –¥–æ–±–∏—Ç—å—Å—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫.

üñº –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ –¥–ª—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞, –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –≤–º–µ—Å—Ç–µ —Å –ø—Ä–æ–º–ø—Ç–æ–º (–ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–æ—Ç–æ –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∞ –Ω–µ –∫–∞–∫ —Ñ–∞–π–ª) —Ä–µ–∂–∏–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–ø—Ç:"""

    return text


def ref_text(ref_link):
    text = f"""üéÅ –ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã! üéâ

–ü–æ–ª—É—á–∞–π 2 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–∞ –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–∏–≥–ª–∞—Å–∏—à—å! (–ª–∏–º–∏—Ç 6 –∫—Ä–µ–¥–∏—Ç–æ–≤)

–ü–æ–¥–µ–ª–∏—Å—å —Å–≤–æ–µ–π —Å—Å—ã–ª–∫–æ–π:
{ref_link}

–°—Ä–∞–∑—É –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω–∏ –ø–µ—Ä–µ–π–¥—É—Ç –ø–æ —Å—Å—ã–ª–∫–µ - –º—ã —Å–æ–æ–±—â–∏–º, –∏ —Ç—ã —Å–º–æ–∂–µ—à—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ—ë —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ!"""
    return text


def help_text():
    text = """‚ÑπÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –º–µ–Ω—é:

üé¨ –°–æ–∑–¥–∞—Ç—å –≤–∏–¥–µ–æ
–ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—á–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é. –ü—Ä–æ—Å—Ç–æ –≤—ã–±–µ—Ä–∏—Ç–µ —ç—Ç—É –∫–Ω–æ–ø–∫—É –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.

üíé –ü–æ–ª—É—á–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
–û—Ç–∫—Ä–æ–µ—Ç –º–µ–Ω—é –ø–æ–∫—É–ø–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –≤–∏–¥–µ–æ.

üë§ –ü—Ä–æ—Ñ–∏–ª—å
–ü–æ–∫–∞–∂–µ—Ç –≤–∞—à —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤–∏–¥–µ–æ."""
    return text


def profile_text(credits: int):
    text = f"""–í–∞—à —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: üíé {credits} –≥–µ–Ω–µ—Ä–∞—Ü–∏{'—è' if credits == 1 else '–π'}"""
    return text


async def admin_link_text(bot, links: list[Link]):
    text = "–°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Å—ã–ª–æ–∫:\n\n"
    for link in links:
        url = await create_start_link(bot, link.link)
        text += f"{link.name} - {url}: –ø–µ—Ä–µ—à–ª–æ {link.counter}\n"

    return text
